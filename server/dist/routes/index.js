// Generated by CoffeeScript 1.9.3
(function() {
  var exec, execSync, execute, express, router, spawn;

  express = require('express');

  router = express.Router();

  router.get('/', function(req, res, next) {
    return res.render('layout', {
      title: 'ТОП 10'
    });
  });

  execSync = require('child_process').execSync;

  spawn = require('child_process').spawn;

  exec = require('child_process').exec;

  execute = function(command, callback) {
    return exec(command, function(error, stdout, stderr) {
      return callback(stdout, stderr);
    });
  };

  router.get('/gitpull', function(req, res, next) {
    return execute('git pull', function(rez, err) {
      return res.end(rez);
    });
  });

  router.get('/gitstatus', function(req, res, next) {
    return execute('git status', function(rez, err) {
      return res.end(rez);
    });
  });

  router.get('/build', function(req, res, next) {
    return execute('./build.sh', function(rez, err) {
      return res.end(rez);
    });
  });

  router.get('/npm', function(req, res, next) {
    return execute('npm install', function(rez, err) {
      return res.end(rez);
    });
  });

  router.get('/update', function(req, res, next) {
    return execute('./update.sh', function(rez, err) {
      return res.end(rez);
    });
  });

  router.get('/okk', function(req, res, next) {
    return res.end('OK');
  });

  module.exports = router;

}).call(this);
