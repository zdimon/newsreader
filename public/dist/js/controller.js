// Generated by CoffeeScript 1.12.5
(function() {
  angular.module('readerApp').controller('indexCtrl', [
    '$scope', 'Top10', '$state', '$rootScope', function($scope, Top10, $state, $rootScope) {
      Top10.get_top10(function(r) {
        return $rootScope.top_list = r;
      });
      return $scope.go = function(id) {
        return $state.go('reader.top_detail', {
          id: id
        });
      };
    }
  ]).controller('topDetailCtrl', [
    '$scope', '$stateParams', '$rootScope', 'Top10', function($scope, $stateParams, $rootScope, Top10) {
      if ($rootScope.top_list) {
        return angular.forEach($rootScope.top_list.articles, function(k, v) {
          if (parseInt(k.id) === parseInt($stateParams.id)) {
            return $scope.article = k;
          }
        });
      } else {
        return Top10.get_top10(function(r) {
          $rootScope.top_list = r;
          return angular.forEach($rootScope.top_list.articles, function(k, v) {
            if (parseInt(k.id) === parseInt($stateParams.id)) {
              return $scope.article = k;
            }
          });
        });
      }
    }
  ]).controller('journalsCtrl', [
    '$scope', '$stateParams', function($scope, $stateParams) {
      $scope.journals_list = [1, 2, 3, 4, 5, 6];
      return $scope.items = [
        {
          src: '/images/cover1.png',
          sub: 'This is a <b>subtitle</b>',
          thumb: '/images/high1.jpg'
        }, {
          src: '/images/cover2.png',
          sub: ''
        }, {
          src: '/images/cover1.png',
          thumb: '/images/high1.jpg'
        }, {
          src: '/images/cover1.png',
          sub: 'This is a <b>subtitle</b>'
        }, {
          src: '/images/cover2.png',
          sub: ''
        }, {
          src: '/images/cover1.png',
          thumb: '/images/cover2.png'
        }, {
          src: '/images/cover1.png',
          sub: 'This is a <b>subtitle</b>'
        }, {
          src: '/images/cover2.png',
          sub: ''
        }, {
          src: '/images/cover1.png',
          thumb: '/images/cover2.png'
        }
      ];
    }
  ]).controller('magazinesCtrl', [
    '$scope', '$stateParams', function($scope, $stateParams) {
      return $scope.items = [
        {
          src: '/images/cover1.png',
          sub: 'This is a <b>subtitle</b>',
          thumb: '/images/high1.jpg'
        }, {
          src: '/images/cover2.png',
          sub: ''
        }, {
          src: '/images/cover1.png',
          thumb: '/images/high1.jpg'
        }
      ];
    }
  ]).controller('readCtrl', [
    '$scope', '$stateParams', function($scope, $stateParams) {
      return $scope.journals_list = [1, 2, 3, 4];
    }
  ]).controller('catalogCtrl', [
    '$scope', '$stateParams', '$state', '$rootScope', function($scope, $stateParams, $state, $rootScope) {
      return $scope.go = function(id) {
        return $state.go('reader.catalog_detail', {
          id: id
        });
      };
    }
  ]).controller('catalogDetailCtrl', [
    '$scope', '$stateParams', '$state', '$rootScope', 'Catalog', function($scope, $stateParams, $state, $rootScope, Catalog) {
      if ($rootScope.catalog) {
        $scope.catalog = $rootScope.catalog.categories[$stateParams.id];
      } else {
        Catalog.get_catalog(function(rez) {
          $rootScope.catalog = rez;
          return $scope.catalog = $rootScope.catalog.categories[$stateParams.id];
        });
      }
      console.log($scope.catalog);
      return $scope.go = function(id) {
        return $state.go('reader.journal_detail', {
          catalog_id: $stateParams.id,
          journal_id: id
        });
      };
    }
  ]).controller('journalDetailCtrl', [
    '$scope', '$stateParams', '$state', '$rootScope', 'Catalog', function($scope, $stateParams, $state, $rootScope, Catalog) {
      if ($rootScope.catalog) {
        $scope.journal = $rootScope.catalog.categories[$stateParams.catalog_id].journals[$stateParams.journal_id];
      } else {
        Catalog.get_catalog(function(rez) {
          $rootScope.catalog = rez;
          return $scope.journal = $rootScope.catalog.categories[$stateParams.catalog_id].journals[$stateParams.journal_id];
        });
      }
      return $scope.go = function(id) {
        console.log(id);
        return $state.go('reader.articles', {
          journal_id: id
        });
      };
    }
  ]).controller('articlesCtrl', [
    '$scope', '$stateParams', '$state', '$rootScope', 'Articles', function($scope, $stateParams, $state, $rootScope, Articles) {
      Articles.get_articles(function(rez) {
        $scope.articles = rez.articles;
        return console.log(rez);
      });
      return $scope.go = function(article_id) {
        return $state.go('reader.article_detail', {
          journal_id: $stateParams.journal_id,
          article_id: article_id
        });
      };
    }
  ]).controller('articleDetailCtrl', [
    '$scope', '$stateParams', '$state', '$rootScope', 'Articles', function($scope, $stateParams, $state, $rootScope, Articles) {
      return Articles.get_articles(function(rez) {
        $scope.articles = rez.articles;
        return angular.forEach($scope.articles, function(v, k) {
          if (parseInt(v.id) === parseInt($stateParams.article_id)) {
            $scope.article = v;
            return console.log(v.id);
          }
        });
      });
    }
  ]);

}).call(this);
