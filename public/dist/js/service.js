// Generated by CoffeeScript 1.9.3
(function() {
  var SERVER_URL;

  SERVER_URL = "http://" + window.location.hostname + ':' + window.location.port;

  angular.module('readerApp').factory('Top10', [
    '$http', function($http) {
      var get_top10;
      get_top10 = function(callback) {
        return $http({
          method: 'GET',
          url: SERVER_URL + "/top10"
        }).success(callback);
      };
      return {
        get_top10: get_top10
      };
    }
  ]).factory('Catalog', [
    '$http', function($http) {
      var get_catalog;
      get_catalog = function(callback) {
        return $http({
          method: 'GET',
          url: SERVER_URL + "/catalog"
        }).success(callback);
      };
      return {
        get_catalog: get_catalog
      };
    }
  ]).factory('Articles', [
    '$http', '$rootScope', function($http, $rootScope) {
      var get_articles;
      get_articles = function(journal_id, issue_id, callback) {
        return $http({
          method: 'GET',
          url: SERVER_URL + "/articles/" + journal_id + "/" + issue_id + ".json"
        }).success(callback);
      };
      return {
        get_articles: get_articles
      };
    }
  ]).factory('Issue', [
    '$http', '$rootScope', function($http, $rootScope) {
      var get_pages;
      get_pages = function(journal_id, issue_id, callback) {
        return $http({
          method: 'GET',
          url: SERVER_URL + "/pages/" + journal_id + "/" + issue_id + ".json"
        }).success(callback);
      };
      return {
        get_pages: get_pages
      };
    }
  ]).factory('Translator', function() {
    var defLang, getLang, messages_ch, messages_en, setLang, translate;
    messages_ch = {
      'ТОП10': '前10名',
      "Газеты": "报纸",
      'Журналы': "期刊",
      'Женские': "女子",
      "Мужские": "男子",
      "Детские": "孩子",
      "Дом и семья": "家庭和家庭",
      "Спорт": "运动",
      "Общество и политика": "社会和政治",
      "Бизнес и финансы": "商业和金融",
      "Научно-популярные": "科普",
      "Досуг и развлечения": "休闲和娱乐"
    };
    messages_en = {
      'ТОП10': 'TOP10',
      "Газеты": "Newspapers",
      'Журналы': "Magazines",
      'Женские': "For women",
      "Мужские": "For men",
      "Детские": "For children",
      "Дом и семья": "House and family",
      "Спорт": "Sport",
      "Общество и политика": "Society and politics",
      "Бизнес и финансы": "Business & Finance",
      "Научно-популярные": "Popular science",
      "Досуг и развлечения": "Leisure and entertainment"
    };
    translate = function(key) {
      if (getLang() === 'ch') {
        return messages_ch[key];
      }
      if (getLang() === 'en') {
        return messages_en[key];
      }
      return key;
    };
    getLang = function() {
      var matches;
      matches = document.cookie.match(new RegExp("(?:^|; )" + 'lang'.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g, '\\$1') + "=([^;]*)"));
      if (matches === null) {
        return void 0;
      } else {
        return decodeURIComponent(matches[1]);
      }
    };
    setLang = function(name) {
      return document.cookie = "lang=" + name;
    };
    defLang = function() {
      console.log(getLang('lang'));
      if (getLang('lang') === void 0) {
        return setLang('ru');
      } else {
        return setLang(getLang('lang'));
      }
    };
    return {
      translate: translate,
      defLang: defLang,
      getLang: getLang,
      setLang: setLang
    };
  });

}).call(this);
