// Generated by CoffeeScript 1.9.3
(function() {
  angular.module('readerApp', ['ionic', 'ion-gallery']).config([
    '$ionicConfigProvider', '$sceDelegateProvider', 'ionGalleryConfigProvider', function($ionicConfigProvider, $sceDelegateProvider, ionGalleryConfigProvider) {
      $sceDelegateProvider.resourceUrlWhitelist(['self', '*://www.youtube.com/**', '*://player.vimeo.com/video/**']);
      return ionGalleryConfigProvider.setGalleryConfig({
        action_label: 'Close',
        toggle: false,
        row_size: 2,
        fixed_row_size: false
      });
    }
  ]).run([
    '$ionicPlatform', '$rootScope', 'Catalog', '$ionicHistory', 'Translator', function($ionicPlatform, $rootScope, Catalog, $ionicHistory, Translator) {
      return $ionicPlatform.ready(function() {
        Translator.defLang();
        $rootScope.lang = Translator.getLang();
        Catalog.get_catalog(function(rez) {
          $rootScope.$broadcast('get-catalog', rez);
          return $rootScope.catalog = rez;
        });
        if (window.cordova && window.cordova.plugins && window.cordova.plugins.Keyboard) {
          cordova.plugins.Keyboard.hideKeyboardAccessoryBar(true);
          cordova.plugins.Keyboard.disableScroll(true);
        }
        if (window.StatusBar) {
          StatusBar.styleDefault();
        }
        $rootScope.trans = function(key) {
          return Translator.translate(key);
        };
        $rootScope.change_lang = function(lang) {
          Translator.setLang(lang);
          return $rootScope.lang = Translator.getLang();
        };
        return $rootScope.$ionicGoBack = function(backCount) {
          $ionicHistory.goBack(backCount);
          $rootScope.show_forward = false;
          return $rootScope.show_backward = false;
        };
      });
    }
  ]);

}).call(this);
