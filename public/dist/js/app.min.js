(function(){angular.module("readerApp",["ionic","ion-gallery"]).config(["$ionicConfigProvider","$sceDelegateProvider","ionGalleryConfigProvider",function(t,e,r){return e.resourceUrlWhitelist(["self","*://www.youtube.com/**","*://player.vimeo.com/video/**"]),r.setGalleryConfig({action_label:"Close",toggle:!1,row_size:2,fixed_row_size:!1})}]).run(["$ionicPlatform","$rootScope","Catalog",function(t,e,r){return t.ready(function(){if(r.get_catalog(function(t){return e.$broadcast("get-catalog",t),e.catalog=t}),window.cordova&&window.cordova.plugins&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar)return StatusBar.styleDefault()})}])}).call(this),function(){angular.module("readerApp").controller("indexCtrl",["$scope","Top10","$state","$rootScope",function(t,e,r,a){return e.get_top10(function(t){return a.top_list=t}),t.go=function(t){return r.go("reader.top_detail",{id:t})}}]).controller("topDetailCtrl",["$scope","$stateParams","$rootScope","Top10",function(t,e,r,a){return r.top_list?angular.forEach(r.top_list.articles,function(r,a){if(parseInt(r.id)===parseInt(e.id))return t.article=r}):a.get_top10(function(a){return r.top_list=a,angular.forEach(r.top_list.articles,function(r,a){if(parseInt(r.id)===parseInt(e.id))return t.article=r})})}]).controller("journalsCtrl",["$scope","$stateParams",function(t,e){return t.journals_list=[1,2,3,4,5,6],t.items=[{src:"/images/cover1.png",sub:"This is a <b>subtitle</b>",thumb:"/images/high1.jpg"},{src:"/images/cover2.png",sub:""},{src:"/images/cover1.png",thumb:"/images/high1.jpg"},{src:"/images/cover1.png",sub:"This is a <b>subtitle</b>"},{src:"/images/cover2.png",sub:""},{src:"/images/cover1.png",thumb:"/images/cover2.png"},{src:"/images/cover1.png",sub:"This is a <b>subtitle</b>"},{src:"/images/cover2.png",sub:""},{src:"/images/cover1.png",thumb:"/images/cover2.png"}]}]).controller("magazinesCtrl",["$scope","$stateParams",function(t,e){return t.items=[{src:"/images/cover1.png",sub:"This is a <b>subtitle</b>",thumb:"/images/high1.jpg"},{src:"/images/cover2.png",sub:""},{src:"/images/cover1.png",thumb:"/images/high1.jpg"}]}]).controller("readCtrl",["$scope","$stateParams",function(t,e){return t.journals_list=[1,2,3,4]}]).controller("catalogCtrl",["$scope","$stateParams","$state","$rootScope",function(t,e,r,a){return t.go=function(t){return r.go("reader.catalog_detail",{id:t})}}]).controller("catalogDetailCtrl",["$scope","$stateParams","$state","$rootScope","Catalog",function(t,e,r,a,o){return a.catalog?t.catalog=a.catalog.categories[e.id]:o.get_catalog(function(r){return a.catalog=r,t.catalog=a.catalog.categories[e.id]}),console.log(t.catalog),t.go=function(t){return r.go("reader.journal_detail",{catalog_id:e.id,journal_id:t})}}]).controller("journalDetailCtrl",["$scope","$stateParams","$state","$rootScope","Catalog",function(t,e,r,a,o){return a.catalog?t.journal=a.catalog.categories[e.catalog_id].journals[e.journal_id]:o.get_catalog(function(r){return a.catalog=r,t.journal=a.catalog.categories[e.catalog_id].journals[e.journal_id]}),t.go=function(t,a){return a?r.go("reader.articles",{issue_id:t,journal_id:e.journal_id}):(console.log(a),r.go("reader.issue_detail",{issue_id:t,journal_id:e.journal_id}))}}]).controller("issueDetailCtrl",["$scope","$stateParams","$state","$rootScope","Issue",function(t,e,r,a,o){return o.get_pages(e.journal_id,e.issue_id,function(e){return t.issue=e,t.pages=e.pages}),t.go=function(t){return r.go("reader.page_detail",{journal_id:e.journal_id,issue_id:e.issue_id,page_id:t})}}]).controller("pageDetailCtrl",["$scope","$stateParams","$state","$rootScope","Issue",function(t,e,r,a,o){return o.get_pages(e.journal_id,e.issue_id,function(o){return console.log("Pages"),t.issue=o,t.pages=o.pages,t.page=o.pages.pages[e.page_id],console.log(t.page),a.show_forward=!0,a.show_backward=!0,a.go_forward=function(){return r.go("reader.page_detail",{journal_id:e.journal_id,issue_id:e.issue_id,page_id:parseInt(e.page_id)+1})},a.go_backward=function(){return r.go("reader.page_detail",{journal_id:e.journal_id,issue_id:e.issue_id,page_id:parseInt(e.page_id)-1})}})}]).controller("articlesCtrl",["$scope","$stateParams","$state","$rootScope","Articles",function(t,e,r,a,o){return o.get_articles(e.journal_id,e.issue_id,function(e){return t.articles=e.articles,console.log(e)}),t.go=function(t){return r.go("reader.article_detail",{journal_id:e.journal_id,issue_id:e.issue_id,article_id:t})}}]).controller("articleDetailCtrl",["$scope","$stateParams","$state","$rootScope","Articles",function(t,e,r,a,o){return o.get_articles(e.journal_id,e.issue_id,function(r){return t.articles=r.articles,angular.forEach(t.articles,function(r,a){if(parseInt(r.id)===parseInt(e.article_id))return t.article=r,console.log(r.id)})})}])}.call(this),function(){var t;t="http://"+window.location.hostname+":"+window.location.port,angular.module("readerApp").factory("Top10",["$http",function(e){var r;return r=function(r){return e({method:"GET",url:t+"/top10"}).success(r)},{get_top10:r}}]).factory("Catalog",["$http",function(e){var r;return r=function(r){return e({method:"GET",url:t+"/catalog"}).success(r)},{get_catalog:r}}]).factory("Articles",["$http","$rootScope",function(e,r){var a;return a=function(r,a,o){return e({method:"GET",url:t+"/articles/"+r+"/"+a+".json"}).success(o)},{get_articles:a}}]).factory("Issue",["$http","$rootScope",function(e,r){var a;return a=function(r,a,o){return e({method:"GET",url:t+"/pages/"+r+"/"+a+".json"}).success(o)},{get_pages:a}}])}.call(this),function(){angular.module("readerApp").config(["$stateProvider","$urlRouterProvider",function(t,e){return e.otherwise("reader/index"),t.state("reader",{url:"/reader",templateUrl:"dist/templates/menu.html",controller:function(){}}).state("reader.index",{url:"/index",views:{content:{templateUrl:"dist/templates/index.html",controller:"indexCtrl"}}}).state("reader.top_detail",{url:"/top/detail/:id",views:{content:{templateUrl:"dist/templates/top_detail.html",controller:"topDetailCtrl"}}}).state("reader.read",{url:"/read/:id",views:{content:{templateUrl:"dist/templates/read.html",controller:"readCtrl"}}}).state("reader.journals",{url:"/journals",views:{content:{templateUrl:"dist/templates/journals.html",controller:"journalsCtrl"}}}).state("reader.magazines",{url:"/magazines",views:{content:{templateUrl:"dist/templates/magazines.html",controller:"magazinesCtrl"}}}).state("reader.catalog",{url:"/catalog",views:{content:{templateUrl:"dist/templates/catalog.html",controller:"catalogCtrl"}}}).state("reader.catalog_detail",{url:"/catalog/detail/:id",views:{content:{templateUrl:"dist/templates/catalog_detail.html",controller:"catalogDetailCtrl"}}}).state("reader.journal_detail",{url:"/journal/detail/:catalog_id/:journal_id",views:{content:{templateUrl:"dist/templates/journal_detail.html",controller:"journalDetailCtrl"}}}).state("reader.issue_detail",{url:"/issue/detail/:journal_id/:issue_id",views:{content:{templateUrl:"dist/templates/issue_detail.html",controller:"issueDetailCtrl"}}}).state("reader.page_detail",{url:"/issue/detail/:journal_id/:issue_id/:page_id",views:{content:{templateUrl:"dist/templates/page_detail.html",controller:"pageDetailCtrl"}}}).state("reader.articles",{url:"/catalog/articles/:journal_id/:issue_id",views:{content:{templateUrl:"dist/templates/articles.html",controller:"articlesCtrl"}}}).state("reader.article_detail",{url:"/catalog/articles/detail/:journal_id/:issue_id/:article_id",views:{content:{templateUrl:"dist/templates/article_detail.html",controller:"articleDetailCtrl"}}})}])}.call(this);