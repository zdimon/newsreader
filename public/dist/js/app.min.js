(function(){angular.module("readerApp",["ionic","ion-gallery"]).config(["$ionicConfigProvider","$sceDelegateProvider","ionGalleryConfigProvider",function(t,e,r){return e.resourceUrlWhitelist(["self","*://www.youtube.com/**","*://player.vimeo.com/video/**"]),r.setGalleryConfig({action_label:"Close",toggle:!1,row_size:2,fixed_row_size:!1})}]).run(["$ionicPlatform","$rootScope","Catalog","$ionicHistory",function(t,e,r,a){return t.ready(function(){return r.get_catalog(function(t){return e.$broadcast("get-catalog",t),e.catalog=t}),window.cordova&&window.cordova.plugins&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&StatusBar.styleDefault(),e.$ionicGoBack=function(t){return a.goBack(t),e.show_forward=!1,e.show_backward=!1}})}])}).call(this),function(){var t;t=function(t){return t.show_forward=!1,t.show_backward=!1},angular.module("readerApp").controller("indexCtrl",["$scope","Top10","$state","$rootScope",function(e,r,a,o){return t(o),r.get_top10(function(t){return o.top_list=t}),e.go=function(t){return a.go("reader.top_detail",{id:t})}}]).controller("topDetailCtrl",["$scope","$stateParams","$rootScope","Top10",function(e,r,a,o){return t(a),a.top_list?angular.forEach(a.top_list.articles,function(t,a){if(parseInt(t.id)===parseInt(r.id))return e.article=t}):o.get_top10(function(t){return a.top_list=t,angular.forEach(a.top_list.articles,function(t,a){if(parseInt(t.id)===parseInt(r.id))return e.article=t})})}]).controller("journalsCtrl",["$scope","$stateParams","$rootScope",function(e,r,a){return t(a),e.journals_list=[1,2,3,4,5,6],e.items=[{src:"/images/cover1.png",sub:"This is a <b>subtitle</b>",thumb:"/images/high1.jpg"},{src:"/images/cover2.png",sub:""},{src:"/images/cover1.png",thumb:"/images/high1.jpg"},{src:"/images/cover1.png",sub:"This is a <b>subtitle</b>"},{src:"/images/cover2.png",sub:""},{src:"/images/cover1.png",thumb:"/images/cover2.png"},{src:"/images/cover1.png",sub:"This is a <b>subtitle</b>"},{src:"/images/cover2.png",sub:""},{src:"/images/cover1.png",thumb:"/images/cover2.png"}]}]).controller("magazinesCtrl",["$scope","$stateParams","$rootScope",function(e,r,a){return t(a),e.items=[{src:"/images/cover1.png",sub:"This is a <b>subtitle</b>",thumb:"/images/high1.jpg"},{src:"/images/cover2.png",sub:""},{src:"/images/cover1.png",thumb:"/images/high1.jpg"}]}]).controller("readCtrl",["$scope","$stateParams","$rootScope",function(e,r,a){return t(a),e.journals_list=[1,2,3,4]}]).controller("catalogCtrl",["$scope","$stateParams","$state","$rootScope",function(e,r,a,o){return t(o),e.go=function(t){return a.go("reader.catalog_detail",{id:t})}}]).controller("catalogDetailCtrl",["$scope","$stateParams","$state","$rootScope","Catalog",function(e,r,a,o,l){return t(o),o.catalog?e.catalog=o.catalog.categories[r.id]:l.get_catalog(function(t){return o.catalog=t,e.catalog=o.catalog.categories[r.id]}),console.log(e.catalog),e.go=function(t){return a.go("reader.journal_detail",{catalog_id:r.id,journal_id:t})}}]).controller("journalDetailCtrl",["$scope","$stateParams","$state","$rootScope","Catalog",function(e,r,a,o,l){return t(o),o.catalog?e.journal=o.catalog.categories[r.catalog_id].journals[r.journal_id]:l.get_catalog(function(t){return o.catalog=t,e.journal=o.catalog.categories[r.catalog_id].journals[r.journal_id]}),e.go=function(t,e){return e?a.go("reader.articles",{issue_id:t,journal_id:r.journal_id}):(console.log(e),a.go("reader.issue_detail",{issue_id:t,journal_id:r.journal_id}))}}]).controller("issueDetailCtrl",["$scope","$stateParams","$state","$rootScope","Issue",function(e,r,a,o,l){return t(o),l.get_pages(r.journal_id,r.issue_id,function(t){return e.issue=t,e.pages=t.pages}),e.go=function(t){return a.go("reader.page_detail",{journal_id:r.journal_id,issue_id:r.issue_id,page_id:t})}}]).controller("pageDetailCtrl",["$scope","$stateParams","$state","$rootScope","Issue",function(e,r,a,o,l){return t(o),l.get_pages(r.journal_id,r.issue_id,function(t){return console.log("Pages"),e.issue=t,e.pages=t.pages,e.page=t.pages.pages[r.page_id],console.log(e.page),o.show_forward=!0,o.show_backward=!0,o.go_forward=function(){return a.go("reader.page_detail",{journal_id:r.journal_id,issue_id:r.issue_id,page_id:parseInt(r.page_id)+1})},o.go_backward=function(){return a.go("reader.page_detail",{journal_id:r.journal_id,issue_id:r.issue_id,page_id:parseInt(r.page_id)-1})}})}]).controller("articlesCtrl",["$scope","$stateParams","$state","$rootScope","Articles",function(e,r,a,o,l){return t(o),l.get_articles(r.journal_id,r.issue_id,function(t){return e.articles=t.articles}),e.go=function(t){return a.go("reader.article_detail",{journal_id:r.journal_id,issue_id:r.issue_id,article_id:t})}}]).controller("articleDetailCtrl",["$scope","$stateParams","$state","$rootScope","Articles",function(e,r,a,o,l){return t(o),l.get_articles(r.journal_id,r.issue_id,function(t){return e.articles=t.articles,e.swipLeft=function(){return alert("left")},e.swipRight=function(){return console.log("right")},angular.forEach(e.articles,function(t,a){if(parseInt(t.id)===parseInt(r.article_id))return e.article=t,console.log(t.id)})})}])}.call(this),function(){var t;t="http://"+window.location.hostname+":"+window.location.port,angular.module("readerApp").factory("Top10",["$http",function(e){var r;return r=function(r){return e({method:"GET",url:t+"/top10"}).success(r)},{get_top10:r}}]).factory("Catalog",["$http",function(e){var r;return r=function(r){return e({method:"GET",url:t+"/catalog"}).success(r)},{get_catalog:r}}]).factory("Articles",["$http","$rootScope",function(e,r){var a;return a=function(r,a,o){return e({method:"GET",url:t+"/articles/"+r+"/"+a+".json"}).success(o)},{get_articles:a}}]).factory("Issue",["$http","$rootScope",function(e,r){var a;return a=function(r,a,o){return e({method:"GET",url:t+"/pages/"+r+"/"+a+".json"}).success(o)},{get_pages:a}}])}.call(this),function(){angular.module("readerApp").config(["$stateProvider","$urlRouterProvider",function(t,e){return e.otherwise("reader/index"),t.state("reader",{url:"/reader",templateUrl:"dist/templates/menu.html",controller:function(){}}).state("reader.index",{url:"/index",views:{content:{templateUrl:"dist/templates/index.html",controller:"indexCtrl"}}}).state("reader.top_detail",{url:"/top/detail/:id",views:{content:{templateUrl:"dist/templates/top_detail.html",controller:"topDetailCtrl"}}}).state("reader.read",{url:"/read/:id",views:{content:{templateUrl:"dist/templates/read.html",controller:"readCtrl"}}}).state("reader.journals",{url:"/journals",views:{content:{templateUrl:"dist/templates/journals.html",controller:"journalsCtrl"}}}).state("reader.magazines",{url:"/magazines",views:{content:{templateUrl:"dist/templates/magazines.html",controller:"magazinesCtrl"}}}).state("reader.catalog",{url:"/catalog",views:{content:{templateUrl:"dist/templates/catalog.html",controller:"catalogCtrl"}}}).state("reader.catalog_detail",{url:"/catalog/detail/:id",views:{content:{templateUrl:"dist/templates/catalog_detail.html",controller:"catalogDetailCtrl"}}}).state("reader.journal_detail",{url:"/journal/detail/:catalog_id/:journal_id",views:{content:{templateUrl:"dist/templates/journal_detail.html",controller:"journalDetailCtrl"}}}).state("reader.issue_detail",{url:"/issue/detail/:journal_id/:issue_id",views:{content:{templateUrl:"dist/templates/issue_detail.html",controller:"issueDetailCtrl"}}}).state("reader.page_detail",{url:"/issue/detail/:journal_id/:issue_id/:page_id",views:{content:{templateUrl:"dist/templates/page_detail.html",controller:"pageDetailCtrl"}}}).state("reader.articles",{url:"/catalog/articles/:journal_id/:issue_id",views:{content:{templateUrl:"dist/templates/articles.html",controller:"articlesCtrl"}}}).state("reader.article_detail",{url:"/catalog/articles/detail/:journal_id/:issue_id/:article_id",views:{content:{templateUrl:"dist/templates/article_detail.html",controller:"articleDetailCtrl"}}})}])}.call(this);